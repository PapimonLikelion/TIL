### 2022-09-13

## Primary 어노테이션
- **문제상황**
  - 테스트에서 쓸 URL generator 빈을 따로 생성해 Primary 어노테이션을 붙임
    - 우선 테스트에서 작성한 Bean은 테스트에서만 동작하기 때문에 문제가 없을것이라고 판단하였음
  - 그런데 해당 Bean이 다른 테스트에도 영향을 줌
    - 다른 테스트는 원래 Production의 기존 Bean이 필요한 상태...

- **해결 방법**
  1. KasService에 endpoint setter를 만든다. 
     - 엔드포인트를 동적으로 변경할 수 있도록 지원
     - 장점
       - 동적으로 객체 교환 가능
     - 단점
       - 테스트를 위한 코드가 프로덕션에 낀다는 것
  2. KasService를 Test에서 config 하는 파일 작성
     - `@TestConfiguration`
     - 장점
       - 가장 깔끔! 테스트에서 쓰일 설정을 하나하나 여기서 재 설정해주고
       - 스프링 환경의 DI, IoC 혜택을 그대로 누릴 수 있음
  3. Value 어노테이션이 붙은 값의 setter 작성
     - Value 값을 동적으로 변경할 수 있도록 지원
     - 장점
       - 매핑이 제대로 안된거... 극복할 수 있음
     - 단점
       - 테스트를 위한 코드가 프로덕션에 낀다는 것

## TestConfiguration
- *참고: https://meetup.toast.com/posts/124*
- 기존 정의된 Configuration을 커스터마이징 하고자 하는 경우 TestConfiguration을 통해 사용 가능
- ComponentScan 과정에서 TestConfiguration 생성
  - 해당 자신이 속한 테스트 실행될 시 정의된 빈을 생성하여 등록될 것
- 직접 TestConfiguration을 추가해줘야해
  - `@Import`를 사용하자

