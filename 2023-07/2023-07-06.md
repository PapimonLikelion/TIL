### 2023-07-06

## React StrictMode
*참고: https://www.youtube.com/watch?v=MXSuOR2yRvQ*
*참고: https://velog.io/@jay/you-might-need-useEffect-diet*
- 컴포넌트 마운트 -> 언마운트 -> 마운트
- Connecting -> Disconnected -> Connecting 순서
- API 한번만 호출하려면 첫 마운트에만 가져오도록 useRef() boolean 으로 flag 걸어두자

## React 생명주기
*참고: https://www.zerocho.com/category/React/post/579b5ec26958781500ed9955*
*참고: https://www.zerocho.com/category/React/post/5f9a6ef507be1d0004347305*
- **리액트 생명주기**
  - 컴포넌트가 실행/업데이트/제거시 이런 이벤트들이 발생
  - 근데 클래스기반 컴포넌트랑 함수형 기반 컴포넌트랑 생명주기가 조금 다르다네?

- **클래스 기반 컴포넌트 생명주기**
  - ![](../images/2023-07-06-react-lifecycle.jpeg) 
  - [Mount]
    - 컴포넌트가 처음 실행될 때
    - 컴포넌트 시작시 context, defaultProps, state 저장
    - componentWillMount 메서드 호출
    - render를 통해 컴포넌트를 DOM에 부착
    - componentDidMount 메서드 호출
      - 여기서 DOM에 접근 가능
      - Ajax 요청, setTimeout, setInterval 등이 가능
  - [Props Update]
    - props가 업데이트될 때
    - componentWillReceiveProps 메서드 호출
    - shouldComponentUpdate 메서드 호출
    - componentWillUpdate 메서드 호출
    - 업데이트 완료후 render 완료
    - componentDidUpdate 호출
    - 꼭 필요한 업데이트 아니면 쳐내서 성능 최적화
  - [State Update]
    - setState 호출을 통해 state가 업데이트 됨
    - props update와 과정이 같지만, componentWillReceiveProps 메서드 호출 안됨
    - 동일하게 shouldComponentUpdate -> componentWillUpdate -> render -> componentDidUpdate
  - [Unmount]
    - 컴포넌트 제거
    - componentWillUnmount

- **함수형 기반 생명주기 - UseEffect 쓰자!**
  - 클래스는 커포넌트에 생명주기가 맞춰져있었어
  - 리액트 17 부터는 componentWillMount, componentWillUpdate, componentWillReceiveProps 라이프사이클 없어짐!
  - 함수형은 **특정 데이터**에 대해서 라이프사이클이 진행된다!
  - 데이터는 여러개이기에, **useEffect**는 데이터의 갯수에 따라 여러번 사용하게 됨
  - [첫 렌더링 시 실행, 바뀔때마다 실행]
    - componentDidMount + componentDidUpdate
    ```js
    useEffect(() => {
        console.log("hidden changed")
    }, [hidden])
    ```
  - [componentWillUnmount 까지 포함하기 - 마운트 끝날때 이거 호출해주세요]
    ```js
    useEffect(() => {
        console.log("hidden changed");
        return () => {
            console.log("hidden will change")
        }
    }, [hidden])
    ```
  - [빈배열을 넣어 마운트 될 때, 언마운트 될 때 한번씩!]
    ```js
    useEffect(() => {
        console.log("mount");
        return () => {
            console.log("unmount")
        }
    }, [])
    ```
  - [리렌더링 될 때마다 한번씩! - 빈배열도 넣지마~]
    ```js
    useEffect(() => {
        console.log("mount");
    })
    ```